# Cupboard Stack Editor v2.0.1

Плагин для Rust сервера, который позволяет редактировать количество стаков в шкафах через удобный интерфейс.

## ✅ Исправления в версии 2.0.1

**Исправлена система прав доступа:**
- Права теперь регистрируются после загрузки конфигурации
- Администраторы автоматически получают права при загрузке плагина
- Новые администраторы автоматически получают права при подключении
- Администраторы всегда имеют доступ независимо от настроек прав
- Добавлены команды для управления правами

## Особенности

- Интерфейс редактирования стаков прямо в игре
- Кнопка "Stack" в правом верхнем углу экрана при открытии шкафа
- Предустановленные значения стаков: 5000, 2000, 3000, 4000
- Автоматическая система прав для администраторов
- Поддержка русского и английского языков
- Проверка авторизации в шкафу

## Установка

1. Скопируйте файл `CupboardStackEditor.cs` в папку `oxide/plugins/`
2. Перезагрузите плагин командой `o.reload CupboardStackEditor`
3. Права будут автоматически выданы всем администраторам

## Использование

1. Откройте любой шкаф (Tool Cupboard)
2. В правом верхнем углу экрана появится зеленая кнопка "СТАК"
3. Нажмите на кнопку "СТАК" для открытия редактора
4. Выберите предмет и нажмите на одно из значений (5000, 2000, 3000, 4000) для изменения количества
5. Текущий размер стака будет подсвечен зеленым цветом

## Конфигурация

```json
{
  "AvailableStackSizes": [5000, 2000, 3000, 4000],
  "Permission": "cupboardstackeditor.use",
  "RequirePermission": false
}
```

### Параметры:
- `AvailableStackSizes` - Доступные размеры стаков для выбора
- `Permission` - Право доступа для использования плагина
- `RequirePermission` - Требовать ли права для использования (по умолчанию false)

## Права доступа

- `cupboardstackeditor.use` - Позволяет использовать редактор стаков

**Автоматические права:**
- Все администраторы автоматически получают права при загрузке плагина
- Новые администраторы автоматически получают права при подключении
- Администраторы всегда имеют доступ независимо от настройки `RequirePermission`

## Команды управления правами

### Для администраторов:

- `/cupboard` - Показать справку по командам
- `/cupboard grant <имя/steamid>` - Выдать права игроку
- `/cupboard revoke <имя/steamid>` - Отозвать права у игрока  
- `/cupboard check <имя/steamid>` - Проверить права игрока

### Примеры:
```
/cupboard grant Player123
/cupboard grant 76561198000000000
/cupboard revoke Player123
/cupboard check Player123
```

### Консольные команды Oxide:
```
o.grant user <steamid> cupboardstackeditor.use
o.grant group <groupname> cupboardstackeditor.use
o.revoke user <steamid> cupboardstackeditor.use
```

## Системные сообщения

Плагин выводит в консоль сервера:
- Информацию о загрузке и настроенных правах
- Уведомления о предоставлении прав администраторам
- Отладочную информацию

## Требования

- Oxide/uMod
- Rust сервер

## Поддержка

Плагин протестирован и работает с последними версиями Rust и Oxide.

## История версий

- **2.0.1** - Исправлена система прав доступа, добавлены команды управления правами
- **2.0.0** - Исправлены проблемы с позиционированием кнопки и стакованием  
- **1.0.0** - Первый релиз